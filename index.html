<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>VPN ‚Äî Mini App</title>
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
  <style>
    body { font-family: system-ui, Arial, sans-serif; margin:0; padding:16px; }
    h1 { margin:0 0 12px; font-size:18px; }
    .card { border:1px solid rgba(0,0,0,.1); border-radius:12px; padding:12px; margin-bottom:12px; }
    label { display:block; margin:6px 0 4px; }
    select, input, textarea, button {
      width:100%; padding:10px; border-radius:10px; border:1px solid rgba(0,0,0,.15);
    }
    button { cursor:pointer; border:none; margin-top:10px; }
    .row { display:grid; grid-template-columns:1fr 1fr; gap:8px; }
    .hint { font-size:13px; opacity:.8; margin-top:6px; }
  </style>
</head>
<body>
  <h1>–ü–æ–¥–ø–∏—Å–∫–∞ VPN</h1>

  <div class="card">
    <button id="btn-status">üîé –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–¥–ø–∏—Å–∫—É</button>
    <div class="hint">–ë–æ—Ç –ø—Ä–∏—à–ª—ë—Ç —Å—Ç–∞—Ç—É—Å –≤ —á–∞—Ç.</div>
  </div>

  <div class="card">
    <label>–ü–∞–∫–µ—Ç –¥–Ω–µ–π</label>
    <select id="days">
      <option value="30">30 –¥–Ω–µ–π</option>
      <option value="60">60 –¥–Ω–µ–π (‚àí5%)</option>
      <option value="90">90 –¥–Ω–µ–π (‚àí10%)</option>
    </select>

    <div class="row">
      <div>
        <label>–ö–æ–ª-–≤–æ –ª—é–¥–µ–π</label>
        <select id="seats">
          <option value="1">1</option><option value="2">2</option><option value="3">3</option>
          <option value="4">4</option><option value="5">5</option><option value="6">6</option>
          <option value="7">7</option><option value="8">8</option><option value="9">9</option>
          <option value="10">10</option>
        </select>
      </div>
      <div>
        <label>–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π (–¥–ª—è –≥—Ä—É–ø–ø—ã)</label>
        <input id="comment" placeholder="–ò–º–µ–Ω–∞/–Ω–∏–∫–Ω–µ–π–º—ã (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)"/>
      </div>
    </div>

    <button id="btn-buy">üí≥ –û—Ñ–æ—Ä–º–∏—Ç—å</button>
    <div class="hint">–ü–æ—Å–ª–µ ¬´–û—Ñ–æ—Ä–º–∏—Ç—å¬ª –≤ —á–∞—Ç –ø—Ä–∏–¥—ë—Ç —Å—É–º–º–∞ –∏ –∫–Ω–æ–ø–∫–∞ ¬´‚úÖ –ì–æ—Ç–æ–≤–æ¬ª.</div>
  </div>

  <script>
    const tg = window.Telegram.WebApp;
    tg.expand(); // —Ä–∞—Å–∫—Ä—ã—Ç—å –Ω–∞ –≤–µ—Å—å —ç–∫—Ä–∞–Ω

    document.getElementById('btn-status').onclick = () => {
      tg.sendData(JSON.stringify({action: 'check_sub'}));
    };

    document.getElementById('btn-buy').onclick = () => {
      const days = parseInt(document.getElementById('days').value, 10);
      const seats = parseInt(document.getElementById('seats').value, 10);
      const comment = document.getElementById('comment').value.trim() || null;

      tg.sendData(JSON.stringify({
        action: 'create_payment',
        days, seats, comment
      }));
    };
  </script>
</body>
</html>
